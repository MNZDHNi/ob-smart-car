# 一、STC32G12K128 48引脚封装引脚分布

## 主要引脚分组

| 端口组    | 引脚数量 | 主要复用功能                         |
| ------ | ---- | ------------------------------ |
| **P0** | 8个引脚 | GPIO, ADC, UART, SPI, I2C, PWM |
| **P1** | 8个引脚 | GPIO, ADC, 外部中断, 定时器           |
| **P2** | 8个引脚 | GPIO, PWM, 外部中断                |
| **P3** | 8个引脚 | GPIO, UART, 外部中断               |
| **P4** | 4个引脚 | GPIO, PWM, SPI                 |
| **P5** | 4个引脚 | GPIO, 外部晶振, 复位                 |

### 具体引脚分配表

以下是48引脚LQFP封装的详细引脚分配：

| 引脚号 | 引脚名称 | 主要功能1 | 主要功能2  | 主要功能3 | 主要功能4 |
| --- | ---- | ----- | ------ | ----- | ----- |
| 1   | P1.0 | GPIO  | ADC0   | INT4  | -     |
| 2   | P1.1 | GPIO  | ADC1   | -     | -     |
| 3   | P1.2 | GPIO  | ADC2   | -     | -     |
| 4   | P1.3 | GPIO  | ADC3   | -     | -     |
| 5   | P1.4 | GPIO  | ADC4   | SS    | -     |
| 6   | P1.5 | GPIO  | ADC5   | MOSI  | -     |
| 7   | P1.6 | GPIO  | ADC6   | MISO  | -     |
| 8   | P1.7 | GPIO  | ADC7   | SCLK  | -     |
| 9   | P5.4 | GPIO  | RST    | -     | -     |
| 10  | P3.0 | GPIO  | RXD    | INT0  | -     |
| 11  | P3.1 | GPIO  | TXD    | INT1  | -     |
| 12  | P3.2 | GPIO  | INT0   | -     | -     |
| 13  | P3.3 | GPIO  | INT1   | -     | -     |
| 14  | P3.4 | GPIO  | T0     | INT2  | -     |
| 15  | P3.5 | GPIO  | T1     | INT3  | -     |
| 16  | P3.6 | GPIO  | INT2   | WR    | -     |
| 17  | P3.7 | GPIO  | INT3   | RD    | -     |
| 18  | P5.0 | GPIO  | ALE    | -     | -     |
| 19  | P4.4 | GPIO  | PWM2   | -     | -     |
| 20  | P4.5 | GPIO  | PWM3   | -     | -     |
| 21  | P0.0 | GPIO  | ADC8   | TXD2  | -     |
| 22  | P0.1 | GPIO  | ADC9   | RXD2  | -     |
| 23  | P0.2 | GPIO  | ADC10  | -     | -     |
| 24  | P0.3 | GPIO  | ADC11  | -     | -     |
| 25  | P0.4 | GPIO  | ADC12  | -     | -     |
| 26  | P0.5 | GPIO  | ADC13  | -     | -     |
| 27  | P0.6 | GPIO  | ADC14  | -     | -     |
| 28  | P0.7 | GPIO  | -      | -     | -     |
| 29  | P2.0 | GPIO  | PWM5   | -     | -     |
| 30  | P2.1 | GPIO  | PWM4   | -     | -     |
| 31  | P2.2 | GPIO  | -      | -     | -     |
| 32  | P2.3 | GPIO  | -      | -     | -     |
| 33  | P2.4 | GPIO  | -      | -     | -     |
| 34  | P2.5 | GPIO  | -      | -     | -     |
| 35  | P2.6 | GPIO  | -      | -     | -     |
| 36  | P2.7 | GPIO  | -      | -     | -     |
| 37  | P5.5 | GPIO  | -      | -     | -     |
| 38  | P4.2 | GPIO  | PWM1_2 | -     | -     |
| 39  | P4.3 | GPIO  | PWM1_3 | -     | -     |
| 40  | P4.0 | GPIO  | PWM1_0 | -     | -     |
| 41  | P4.1 | GPIO  | PWM1_1 | -     | -     |
| 42  | VCC  | 电源    | -      | -     | -     |
| 43  | GND  | 地     | -      | -     | -     |
| 44  | P5.1 | GPIO  | -      | -     | -     |
| 45  | P5.2 | GPIO  | XTAL1  | -     | -     |
| 46  | P5.3 | GPIO  | XTAL2  | -     | -     |
| 47  | AVCC | 模拟电源  | -      | -     | -     |
| 48  | AGND | 模拟地   | -      | -     | -     |
# 二、引脚复用配置寄存器

## 1. 外设引脚切换寄存器（P_SWx）

STC32G12K128通过**P_SW1**, **P_SW2**, **P_SW3** 等寄存器来控制外设引脚的映射。

### P_SW1（外设切换寄存器1）

|位|7|6|5|4|3|2|1|0|
|---|---|---|---|---|---|---|---|---|
|功能|-|UART2_S|SPI_S|-|-|-|-|-|

- **UART2_S**：UART2引脚选择
    
    - 0：UART2映射到P1.0(RxD2), P1.1(TxD2)
    - 1：UART2映射到P0.1(RxD2), P0.0(TxD2)

- **SPI_S**：SPI引脚选择
    
    - 0：SPI映射到P1.4(SS), P1.5(MOSI), P1.6(MISO), P1.7(SCLK)
    - 1：SPI映射到P4.4(SS), P4.5(MOSI), P2.4(MISO), P2.5(SCLK)

### P_SW2（外设切换寄存器2）

|位|7|6|5|4|3|2|1|0|
|---|---|---|---|---|---|---|---|---|
|功能|-|-|-|-|I2C_S|-|-|-|

- **I2C_S**：I2C引脚选择
    
    - 0：I2C映射到P1.3(SCL), P1.2(SDA)
    - 1：I2C映射到P2.3(SCL), P2.2(SDA)

### P_SW3（外设切换寄存器3）

|位|7|6|5|4|3|2|1|0|
|---|---|---|---|---|---|---|---|---|
|功能|-|-|-|-|-|-|UART3_S|UART4_S|

- **UART3_S**：UART3引脚选择
- **UART4_S**：UART4引脚选择

## 2. PWM引脚配置寄存器

### PWMx_PS（PWM引脚选择寄存器）

```c
// PWM1引脚选择寄存器
PWM1_PS = 0x00;  // 默认PWM1输出到P2口

// 可以配置PWM输出到不同的引脚组
```
